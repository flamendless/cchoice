// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: email_job.sql

package queries

import (
	"context"
	"database/sql"
)

const getEmailJobByID = `-- name: GetEmailJobByID :one
SELECT id, queue_id, recipient, cc, subject, template_name, order_id, checkout_payment_id, created_at, updated_at FROM tbl_email_jobs
WHERE id = ?
LIMIT 1
`

func (q *Queries) GetEmailJobByID(ctx context.Context, id int64) (TblEmailJob, error) {
	row := q.db.QueryRowContext(ctx, getEmailJobByID, id)
	var i TblEmailJob
	err := row.Scan(
		&i.ID,
		&i.QueueID,
		&i.Recipient,
		&i.Cc,
		&i.Subject,
		&i.TemplateName,
		&i.OrderID,
		&i.CheckoutPaymentID,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getEmailJobByQueueID = `-- name: GetEmailJobByQueueID :one
SELECT id, queue_id, recipient, cc, subject, template_name, order_id, checkout_payment_id, created_at, updated_at FROM tbl_email_jobs
WHERE queue_id = ?
LIMIT 1
`

func (q *Queries) GetEmailJobByQueueID(ctx context.Context, queueID string) (TblEmailJob, error) {
	row := q.db.QueryRowContext(ctx, getEmailJobByQueueID, queueID)
	var i TblEmailJob
	err := row.Scan(
		&i.ID,
		&i.QueueID,
		&i.Recipient,
		&i.Cc,
		&i.Subject,
		&i.TemplateName,
		&i.OrderID,
		&i.CheckoutPaymentID,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getEmailJobsByCheckoutPaymentID = `-- name: GetEmailJobsByCheckoutPaymentID :many
SELECT id, queue_id, recipient, cc, subject, template_name, order_id, checkout_payment_id, created_at, updated_at FROM tbl_email_jobs
WHERE checkout_payment_id = ?
ORDER BY created_at DESC
`

func (q *Queries) GetEmailJobsByCheckoutPaymentID(ctx context.Context, checkoutPaymentID sql.NullString) ([]TblEmailJob, error) {
	rows, err := q.db.QueryContext(ctx, getEmailJobsByCheckoutPaymentID, checkoutPaymentID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []TblEmailJob
	for rows.Next() {
		var i TblEmailJob
		if err := rows.Scan(
			&i.ID,
			&i.QueueID,
			&i.Recipient,
			&i.Cc,
			&i.Subject,
			&i.TemplateName,
			&i.OrderID,
			&i.CheckoutPaymentID,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getEmailJobsByOrderID = `-- name: GetEmailJobsByOrderID :many
SELECT id, queue_id, recipient, cc, subject, template_name, order_id, checkout_payment_id, created_at, updated_at FROM tbl_email_jobs
WHERE order_id = ?
ORDER BY created_at DESC
`

func (q *Queries) GetEmailJobsByOrderID(ctx context.Context, orderID sql.NullInt64) ([]TblEmailJob, error) {
	rows, err := q.db.QueryContext(ctx, getEmailJobsByOrderID, orderID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []TblEmailJob
	for rows.Next() {
		var i TblEmailJob
		if err := rows.Scan(
			&i.ID,
			&i.QueueID,
			&i.Recipient,
			&i.Cc,
			&i.Subject,
			&i.TemplateName,
			&i.OrderID,
			&i.CheckoutPaymentID,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const insertEmailJob = `-- name: InsertEmailJob :one
INSERT INTO tbl_email_jobs(
	queue_id,
	recipient,
	cc,
	subject,
	template_name,
	order_id,
	checkout_payment_id
) VALUES (
	?, ?, ?, ?, ?, ?, ?
) RETURNING id, queue_id, recipient, cc, subject, template_name, order_id, checkout_payment_id, created_at, updated_at
`

type InsertEmailJobParams struct {
	QueueID           string
	Recipient         string
	Cc                sql.NullString
	Subject           string
	TemplateName      string
	OrderID           sql.NullInt64
	CheckoutPaymentID sql.NullString
}

func (q *Queries) InsertEmailJob(ctx context.Context, arg InsertEmailJobParams) (TblEmailJob, error) {
	row := q.db.QueryRowContext(ctx, insertEmailJob,
		arg.QueueID,
		arg.Recipient,
		arg.Cc,
		arg.Subject,
		arg.TemplateName,
		arg.OrderID,
		arg.CheckoutPaymentID,
	)
	var i TblEmailJob
	err := row.Scan(
		&i.ID,
		&i.QueueID,
		&i.Recipient,
		&i.Cc,
		&i.Subject,
		&i.TemplateName,
		&i.OrderID,
		&i.CheckoutPaymentID,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
